diff -r e2c08dc37617 src/Makefile
--- a/src/Makefile	Wed May 02 11:01:52 2018 -0400
+++ b/src/Makefile	Wed May 02 08:51:30 2018 -0700
@@ -36,7 +36,11 @@
   endif
 else ifeq (osx, $(findstring osx, $(MAKECMDGOALS)))
   # Cross-compile for Mac OSX.
-  CROSS = x86_64-apple-darwin9-
+  ifeq (Darwin, $(shell uname -s))
+    CROSS =
+  else
+    CROSS = x86_64-apple-darwin9-
+  endif
   CFLAGS += -mdynamic-no-pic
   CXXFLAGS += -mdynamic-no-pic
   LUA_CFLAGS = -DLUA_USE_MACOSX
@@ -56,6 +60,11 @@
   else
     plat_flag = -DCURSES
     CURSES_LIBS = -lncurses
+    ifeq (Darwin, $(shell uname -s))
+      CURSES_LIBS += -L/usr/local/Cellar/ncurses/6.0_3/lib
+      CFLAGS += -D_DARWIN_C_SOURCE -I/usr/local/Cellar/ncurses/6.0_3/include
+      CXXFLAGS += -D_DARWIN_C_SOURCE -I/usr/local/Cellar/ncurses/6.0_3/include
+    endif
   endif
 else
   # Build for Linux/BSD.
@@ -136,9 +145,11 @@
 termkey_unix_objs = driver-ti.o driver-csi.o
 termkey_win32_objs = driver-win32-pdcurses.o
 termkey_objs = termkey.o $(termkey_unix_objs) $(termkey_win32_objs)
-cdk_objs = binding.o buttonbox.o cdk.o cdk_display.o cdk_objs.o cdkscreen.o \
+# Need to prefix these b/c OS X filenames are case-insensitive and selection.o conflicts with scintilla's.
+cdk_objs_base = binding.o buttonbox.o cdk.o cdk_display.o cdk_objs.o cdkscreen.o \
            draw.o entry.o fselect.o itemlist.o label.o mentry.o popup_label.o \
            scroll.o scroller.o select_file.o selection.o traverse.o version.o
+cdk_objs = $(addprefix cdk-, $(cdk_objs_base))

 # Add debugging symbols and disable optimizations when DEBUG=1.
 # Note: In order to profile with gprof (-pg), do not retain symbols in LDFLAGS.
@@ -180,7 +191,7 @@
 $(gtdialog_objs): gtdialog/gtdialog.c
 	$(CROSS)$(CC) -c $(CFLAGS) -std=c99 -pedantic $(plat_flag) -DNOHELP \
 		-DLIBRARY $(gtdialog_flags) $< -o $@
-$(cdk_objs): %.o: cdk/%.c
+$(cdk_objs): cdk-%.o: cdk/%.c
 	$(CROSS)$(CC) -c $(CFLAGS) -D_GNU_SOURCE -Itermkey -Icdk $(CURSES_CFLAGS) $< \
 		-o $@
 $(termkey_objs): %.o: termkey/%.c
diff -r e2c08dc37617 src/textadept.c
--- a/src/textadept.c	Wed May 02 11:01:52 2018 -0400
+++ b/src/textadept.c	Wed May 02 08:51:30 2018 -0700
@@ -2456,7 +2456,12 @@
   uint32_t size = FILENAME_MAX;
   _NSGetExecutablePath(path, &size);
   textadept_home = realpath(path, NULL);
-  p = strstr(textadept_home, "MacOS"), strcpy(p, "Resources\0");
+  p = strstr(textadept_home, "MacOS");
+  if (p != NULL) {
+    strcpy(p, "Resources\0");
+  } else {
+    if ((last_slash = strrchr(textadept_home, '/'))) *last_slash = '\0';
+  }
   free(path);
 #if !CURSES
   osxapp = g_object_new(GTKOSX_TYPE_APPLICATION, NULL);
diff -r e2c08dc37617 src/termkey.patch
--- a/src/termkey.patch	Wed May 02 11:01:52 2018 -0400
+++ b/src/termkey.patch	Wed May 02 08:51:30 2018 -0700
@@ -218,7 +218,7 @@
    if(tk->fd != -1 && !(tk->flags & TERMKEY_FLAG_NOTERMIOS)) {
      struct termios termios;
      if(tcgetattr(tk->fd, &termios) == 0) {
-@@ -472,9 +481,9 @@
+@@ -472,9 +481,10 @@
          /* want no signal keys at all, so just disable ISIG */
          termios.c_lflag &= ~ISIG;
        else {
@@ -227,6 +227,7 @@
          termios.c_cc[VQUIT] = _POSIX_VDISABLE;
 -        termios.c_cc[VSUSP] = _POSIX_VDISABLE;
 +        termios.c_cc[VINTR] = _POSIX_VDISABLE;
++        termios.c_cc[VLNEXT] = _POSIX_VDISABLE;
          /* Some OSes have Ctrl-Y==VDSUSP */
  #ifdef VDSUSP
          termios.c_cc[VDSUSP] = _POSIX_VDISABLE;
